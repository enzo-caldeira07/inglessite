<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Environmental Conditionals Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #e8f5e9, #fff8e1);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      position: relative;
    }

    .quiz-container {
      background: #ffffff;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      width: 420px;
      text-align: center;
      border: 3px solid #4caf50;
      display: none;
    }

    #start-screen {
      text-align: center;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 90%;
      max-width: 400px;
      background: #ffffff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      border: 3px solid #4caf50;
    }

    #start-screen h1 {
      margin-bottom: 10px;
      color: #2e7d32;
    }

    #start-screen p {
      font-size: 16px;
      color: #555;
    }

    #progress-container {
      width: 100%;
      background-color: #c8e6c9;
      border-radius: 10px;
      margin-bottom: 15px;
      height: 15px;
      overflow: hidden;
    }

    #progress-bar {
      height: 100%;
      width: 0%;
      background-color: #66bb6a;
      transition: width 0.4s ease;
    }

    #score-display {
      font-size: 18px;
      font-weight: bold;
      color: #388e3c;
      margin-bottom: 10px;
      text-align: right;
    }

    h2 {
      margin-bottom: 20px;
      color: #2e7d32;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      background: #8d6e63;
      color: white;
      font-size: 16px;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #6d4c41;
    }

    .btn.correct {
      background: #388e3c !important;
    }

    .btn.wrong {
      background: #d32f2f !important;
    }

    #next-btn {
      margin-top: 15px;
      display: none;
      background: #388e3c;
    }

    #next-btn:hover {
      background: #1b5e20;
    }

    #feedback {
      padding: 12px;
      border-radius: 10px;
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
      display: none;
      background-color: #f1f8e9;
      border: 2px solid transparent;
    }

    #feedback.correct {
      color: #2e7d32;
      border-color: #a5d6a7;
      background-color: #e8f5e9;
    }

    #feedback.wrong {
      color: #d32f2f;
      border-color: #ef9a9a;
      background-color: #ffebee;
    }

    .fade-in {
      animation: fadeIn 0.4s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 480px) {
      .quiz-container, #start-screen {
        width: 90%;
        padding: 20px;
      }

      h2 {
        font-size: 18px;
      }

      .btn {
        font-size: 15px;
        padding: 10px;
      }

      #score-display {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

  <!-- Start Screen -->
  <div id="start-screen">
    <h1>üå± Environmental Conditionals Quiz</h1>
    <p>Test your English grammar skills while learning about the environment!</p>
    <button id="start-btn" class="btn">Start Quiz</button>
  </div>

  <!-- Quiz Container -->
  <div class="quiz-container">
    <div id="progress-container">
      <div id="progress-bar"></div>
    </div>
    <div id="score-display">Score: 0</div>
    <h2 id="question">Question appears here</h2>
    <div id="answer-buttons"></div>
    <p id="feedback"></p>
    <button id="next-btn" class="btn">Next</button>
  </div>

  <script>
    const conditionals = [
      "Zero Conditional",
      "First Conditional",
      "Second Conditional",
      "Third Conditional"
    ];

    const questions = [
      {
        question: "If we cut down too many trees, the air gets polluted. This phrase is a‚Ä¶?",
        correct: "Zero Conditional"
      },
      {
        question: "If people recycle more, we will reduce waste. This phrase is a‚Ä¶?",
        correct: "First Conditional"
      },
      {
        question: "If I were the president, I would invest in renewable energy. This phrase is a‚Ä¶?",
        correct: "Second Conditional"
      },
      {
        question: "If we had protected the forests earlier, many species would not have disappeared. This phrase is a‚Ä¶?",
        correct: "Third Conditional"
      }
    ];

    const startScreen = document.getElementById("start-screen");
    const startBtn = document.getElementById("start-btn");
    const quizContainer = document.querySelector(".quiz-container");

    const questionElement = document.getElementById("question");
    const answerButtons = document.getElementById("answer-buttons");
    const nextButton = document.getElementById("next-btn");
    const feedbackElement = document.getElementById("feedback");
    const scoreDisplay = document.getElementById("score-display");
    const progressBar = document.getElementById("progress-bar");

    let currentQuestionIndex = 0;
    let score = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    startBtn.addEventListener("click", () => {
      startScreen.style.display = "none";
      quizContainer.style.display = "block";
      startQuiz();
    });

    function startQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      nextButton.innerHTML = "Next";
      updateScoreDisplay();

      shuffle(questions);

      showQuestion();
      updateProgressBar();
    }

    function showQuestion() {
      resetState();
      let currentQuestion = questions[currentQuestionIndex];
      questionElement.innerHTML = currentQuestion.question;

      questionElement.classList.remove("fade-in");
      void questionElement.offsetWidth;
      questionElement.classList.add("fade-in");

      conditionals.forEach(option => {
        const button = document.createElement("button");
        button.innerHTML = option;
        button.classList.add("btn");
        button.addEventListener("click", () => selectAnswer(button, option, currentQuestion.correct));
        answerButtons.appendChild(button);
      });

      updateProgressBar();
    }

    function resetState() {
      nextButton.style.display = "none";
      feedbackElement.style.display = "none";
      feedbackElement.innerHTML = "";
      feedbackElement.className = "";
      while (answerButtons.firstChild) {
        answerButtons.removeChild(answerButtons.firstChild);
      }
    }

    function selectAnswer(button, selected, correct) {
      const buttons = answerButtons.querySelectorAll(".btn");
      buttons.forEach(b => {
        b.disabled = true;
        if (b.innerHTML === correct) {
          b.classList.add("correct");
        } else if (b === button && selected !== correct) {
          b.classList.add("wrong");
        }
      });

      if (selected === correct) {
        score++;
        updateScoreDisplay();
        feedbackElement.innerHTML = "üå± Great job! You got it right! Keep protecting our planet. üíö";
        feedbackElement.classList.add("correct");
      } else {
        feedbackElement.innerHTML = `üî• Oops! Not this time... The correct answer is: <b>${correct}</b>.`;
        feedbackElement.classList.add("wrong");
      }

      feedbackElement.style.display = "block";
      nextButton.style.display = "block";
    }

    function updateScoreDisplay() {
      scoreDisplay.innerHTML = `Score: ${score}`;
    }

    function updateProgressBar() {
      const progress = (currentQuestionIndex / questions.length) * 100;
      progressBar.style.width = `${progress}%`;
    }

    function showScore() {
      resetState();
      let medal = "";
      if (score === questions.length) {
        medal = "ü•á <strong>Gold Medal - Perfect score!</strong>";
      } else if (score >= questions.length - 1) {
        medal = "ü•à <strong>Silver Medal - Great job!</strong>";
      } else {
        medal = "ü•â <strong>Bronze Medal - Keep practicing!</strong>";
      }

      questionElement.innerHTML = `You got ${score} out of ${questions.length}! üåç‚ú®`;
      feedbackElement.style.display = "block";
      feedbackElement.classList.add("correct");
      feedbackElement.innerHTML = `Thanks for playing! Together we can fight global warming. üå±üî•<br><br>${medal}`;
      nextButton.innerHTML = "Restart";
      nextButton.style.display = "block";
      progressBar.style.width = `100%`;
    }

    function handleNextButton() {
      currentQuestionIndex++;
      if (currentQuestionIndex < questions.length) {
        showQuestion();
      } else {
        showScore();
      }
    }

    nextButton.addEventListener("click", () => {
      if (currentQuestionIndex < questions.length) {
        handleNextButton();
      } else {
        startQuiz();
      }
    });
  </script>
</body>
</html>